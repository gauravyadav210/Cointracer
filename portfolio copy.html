<!DOCTYPE html><html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="dash.css">
    <!-- <link rel="icon" href="demo.png" type="image/gif" sizes="16x16"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
     <!-- <link rel="icon" href="demo.png" type="image/gif" sizes="16x16"> -->
     <link href="style.css" rel="stylesheet">
     <link href="css/bootstrap.css" rel="stylesheet">
     <!-- FontAwesome Icons core CSS -->
     <link href="css/font-awesome.min.css" rel="stylesheet">
     <!-- Custom animate styles for this template -->
     <link href="css/animate.css" rel="stylesheet">
     <!-- Custom styles for this template -->
     <link href="style.css" rel="stylesheet">
     <!-- Responsive styles for this template -->
     <link href="css/responsive.css" rel="stylesheet">
     <!-- Colors for this template -->
     <link href="css/colors.css" rel="stylesheet">
     <link rel="shortcut icon" href="logo1.jpeg" type="image/x-icon"> 
  </head>
  <body>

    <header class="header">

      <div class="header_top_section">
         <div class="container">
            <div class="row">
             <div class="col-lg-3">
                <div class="full">
                   <div class="logo">
                      <a href="index.html"><img src="logo1.jpeg" alt="#"  height="80px" width="100px"/></a>
                   </div>
                </div>
             </div>
             <div class="col-lg-9 site_information">
                <div class="full">
                    <div class="top_section_info">
                       <ul>
                         <li>Contact Us: <img src="images/i1.png" alt="#" /> <a href="#">9835070961</a></li>
                         <li><img src="images/i2.png" alt="#" /> <a href="#">abhirajanand31@gmail.com</a></li>
                         <li><img src="images/i3.png" alt="#" /> <a href="#">GU, Greater Noida</a></li>
                      </ul>
                    </div>
                </div>
             </div>
          </div>
         </div>


         <div class="header_bottom_section">

          <!-- <div class="container"> -->
             
            <div class="row">
                <div class="col-md-12">
                   <div class="full ">
                      <div class="main_menu">
                         <nav class="navbar navbar-inverse navbar-toggleable-md">
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#cloapediamenu" aria-controls="cloapediamenu" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="float-left">Menu</span>
                            <span class="float-right"><i class="fa fa-bars"></i> <i class="fa fa-close"></i></span>
                            </button>
                            <div class="collapse navbar-collapse justify-content-md-center" id="cloapediamenu">
                               <ul class="navbar-nav">
                                  <li class="nav-item ">
                                     <a class="nav-link" href="index.html">Home</a>
                                  </li>
                                  <li class="nav-item active">
                                     <a class="nav-link color-aqua-hover" href="portfolio.html">DashBoard</a>
                                  </li>
                                  <li class="nav-item">
                                     <a class="nav-link color-aqua-hover" href="predict.html">Prediction</a>
                                  </li>
                                  <li class="nav-item">
                                     <a class="nav-link color-grey-hover" href="cont.html">Contact</a>
                                  </li>
                                  
                               </ul>
                            </div>
                         </nav>
                      </div>
                      <div class="search_bar">
                          <form action="index.html">
                             <input type="text" class="search_field" placeholder="Search" required />
                             <button class="search_button" type="button"><i class="fa fa-search"></i></button>
                          </form>
                       </div>
                    </div>
                 </div>
              </div>
           </div>
        </header>


        <button class="btn_dash"><a href="portfolio.html">Refresh</a></button>
   <!-- create table -->
   <table class="table_dash" id="leaderboard">
   
     <br>
     
     <br>
     <thead>
       <tr>
         <th class="rank">&nbsp;Rank</th>
         <th class="name"> Name</th>
         <th class="symbol"> Symbol</th>
         <th class="price"> Price($)</th>
         <th class="market_cap"> Market Cap</th>
         <th class="circulating_supply"> Circulating Supply</th>
         <th class="volume_24h"> Volume (24th)</th>
         <th class="percentage_change_24h"> 24th %</th>
       </tr>
     </thead>
     <tbody id="cryptocurrencies">

     </tbody>
   </table>
 <br>
 
 <br>
 <footer class="footer layout_padding">
  <div class="container">
     <div class="row">
        <div class="col-md-3 col-sm-12">
           <a href="index.html"><img class="img-responsive" src="logo1.jpeg" alt="#" /></a>
        </div>

        <div class="col-md-3 col-sm-12">
           <div class="footer_link_heading">
              <h3>Address</h3>
           </div>
           <div class="address_infor">
              <p> 
                 <span class="icon"><img src="images/location_icon.png" alt="#" /></span>
                 <span class="addrs">Galgotias University ,Greater Noida</span>
              </p>
           </div>
        </div>

        <div class="col-md-3 col-sm-12">
           <div class="footer_link_heading">
              <h3>Social Link</h3>
           </div>
           <div class="social_icon">
             <ul>
                <li><a href="https://i am commenting www.facebook.com/profile.php?id=100007099784706"><img src="images/fb.png" alt="#" /></a></li>
                <li><a href="https://i am commenting twitter.com/Abhishek_G7631"><img src="images/tw.png" alt="#" /></a></li>
                <li><a href="https://i am commenting www.instagram.com/abhishekgupta_7631/"><img src="images/insta_logo.jpeg" width="37px" alt="#" /></a></li>
                <li><a href="https://i am commenting www.linkedin.com/in/abhishek-gupta-a4824b213/"><img src="images/in.png" alt="#" /></a></li>
             </ul>

           </div>
        </div>
        
        <div class="col-md-3 col-sm-12">
           <div class="footer_link_heading">
              <h3>Newsletter</h3>
           </div>
           <div class="email_address_bottom">
              <form>
                 <fieldset>
                    <div class="field_email">
                       <input type="email" name="email" placeholder="Enter Your Email">
                       <button><i class="fa fa-search"></i></button>
                    </div>
                 </fieldset>
              </form>
           </div>
        </div>
     </div>
  </div>
</footer>
<div class="cpy">
 <div class="container">
    <div class="row">
      <div class="col-md-12">
        <p>Â© CoinStats 2022. All Rights Reserved. </p>
      </div>
    </div>
 </div>
</div>







  </body>

   <!-- for removing the cors error in the chrome at the time of fetching data  from the coingecko site 

<script>
  const express= require("express")
  const app = express()
  const cors = require("cors")
  app.use(
    cors({
      origin: "https://127.0.0.1:5500",
      credential: true,
    })
  )
</script> -->


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"> </script>
  <script>
    //fetch teh cryptocurrency data and store it inside the variable 
    var xhReq = new XMLHttpRequest( );
    
    xhReq.open("GET","https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd",false);
xhReq.setRequestHeader("Content-Type","application/json");
    xhReq.setRequestHeader("X-Requested-With","XMLHttpRequest");
    xhReq.setRequestHeader("Access-Control-Allow-Origin","*");
    xhReq.setRequestHeader("Access-Control-Allow-Headers","*");

    xhReq.setRequestHeader("Accept","application/json");
    xhReq.send(null);
    var data = JSON.parse(xhReq.responseText);

    console.log(data[0]);

    //intialisation

    var cryptocurrencies;
    var timerId;
    var updateInterval =10000;

    function reposition(){
       var height = $("#cryptocurrencies .cryptocurrency").height();
       var y = height;
       for(var i=0;i<cryptocurrencies.length;i++){
         cryptocurrencies[i].$item.css("top", y + "px");
         y += height;
       }
    }


    function updateRank(cryptocurrencies){
      for(var i=0;i<cryptocurrencies.length;i++){
        cryptocurrencies.$item.find(".rank").text(i + 1);
      }
    }


    function getRandomScoreIncrease(){


      return getRandomBetween(10,20);
    }
  function getRandomBetween(min,max){
     return Math.floor(Math.random()*max) + min;
  }

  function fetchNewData(data,attributeName,name){
    for(var x in data){
      if ((data[x].name == name)== true){
        return data[x][attributeName];
      }
    }
    return null;
  }


     function getNewData(){
       //get the new data for each coin and change their new values
       var newReq = new XMLHttpRequest( );
    
    newReq.open("GET","https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd",false);
    newReq.setRequestHeader("Content-Type","application/json");
    newReq.setRequestHeader("X-Requested-With","XMLHttpRequest");
    newReq.setRequestHeader("Access-Control-Allow-Origin","*");
    newReq.setRequestHeader("Access-Control-Allow-Headers","*");

    newReq.setRequestHeader("Accept","application/json");
    newReq.send(null);
    var newData = JSON.parse(newReq.responseText);
       for(var i=0; i<cryptocurrencies.length;i++){
         var cryptocurrency = cryptocurrencies[i];
        //  cryptocurrency.percentage_change_24h += getRandomScoreIncrease();
      cryptocurrency.price = fetchNewData(newData,'current_price',cryptocurrency.name);
         cryptocurrency.$item.find(".price").text(cryptocurrency.price);
      cryptocurrency.percentage_change_24h = fetchNewData(newData,'percentage_change_24h',cryptocurrency.name);
         cryptocurrency.$item.find(".percentage_change_24h").text(cryptocurrency.percentage_change_24h);
       }
      //  cryptocurrencies.sort(descending);
      updateRank(cryptocurrencies);
      reposition();
       console.log('I am refreshing');
     }

    function resetBoard(){
      var $list =$("#cryptocurrencies");
      $list.find(".cryptocurrency").remove();
      if(timerId !== undefined){
        clearInterval(timerId);
      }
      cryptocurrencies = [];
      for (let i =0;i<100 ; i++){
        cryptocurrencies.push(
          {
            name: data[i].name,
            symbol:data[i].symbol,
            price: data[i].current_price,
            market_cap: data[i].market_cap,
            circulating_supply: data[i].circulating_supply,
            volume_24h:data[i].total_volume,
            percentage_change_24h:data[i].market_cap_change_percentage_24h,
          }
        )
      }
      for( var i=0 ; i<cryptocurrencies.length ; i++){
        var $item =$(
          "<tr class = 'cryptocurrency'>" +
             "<th class='rank'>"+(i+1) + "</th>" +
              "<td class='name'>" + cryptocurrencies[i].name + "</td>" +
              "<td class='symbol'>" + cryptocurrencies[i].symbol + "</td>" +
              "<td class='price'>" + cryptocurrencies[i].price + "</td>" +
              "<td class='market_cap'>" + cryptocurrencies[i].market_cap + "</td>" +
              "<td class='circulating_supply'>" + cryptocurrencies[i].circulating_supply + "</td>" +
              "<td class='volume_24h'>" + cryptocurrencies[i].volume_24h + "</td>" +
              "<td class='percentage_change_24h'>" + cryptocurrencies[i].percentage_change_24h + "</td>" +
              //Math.round() for rounding the decimal places
          "</tr>"
        );
        cryptocurrencies[i].$item= $item;
        $list.append($item);
      }
      // cryptocurrencies.sort(descending);
      updateRank(cryptocurrencies);
      reposition();
      //fetch the data for every update interval
      timerId = setInterval("getNewData();",updateInterval);

    }

    resetBoard();
  </script>
  <script>
    function myFunction(){
    var x = document.getElementById("myLinks");
    if (x.style.display === "block") {
      x.style.display = "none";
    } 
    else {
      x.style.display = "block";
    }
  }
  </script>


  </body>
  </html>